document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("back-to-top");e||(e=document.createElement("div"),e.id="back-to-top",e.innerHTML='<img src="/images/cursor_plane.png" alt="Back to Top">',document.body.appendChild(e)),window.addEventListener("scroll",()=>{window.scrollY>300?e.classList.add("visible"):e.classList.remove("visible")}),e.addEventListener("click",()=>{let t=6e3+window.scrollY/1e3*1e3;t=Math.min(Math.max(t,7e3),12e3),e.style.setProperty("--fly-duration",`${t}ms`),e.classList.add("flying");const n=setInterval(()=>{d()},80),a=window.scrollY,i=performance.now();function s(p){const c=p-i,r=Math.min(c/t,1);let l=0;if(r<.6)l=r/.6*.1;else{const m=(r-.6)/.4;l=.1+.9*(1-Math.pow(1-m,3))}window.scrollTo(0,a*(1-l)),c<t&&requestAnimationFrame(s)}requestAnimationFrame(s),setTimeout(()=>{clearInterval(n),e.classList.remove("flying")},t+100)});function d(){const o=e.getBoundingClientRect();if(o.top<-50||o.top>window.innerHeight+50)return;const t=document.createElement("div"),n=Math.random()*15+10,a=Math.random()>.7;Object.assign(t.style,{position:"fixed",left:`${o.left+o.width/2}px`,top:`${o.top+o.height/2}px`,width:`${n}px`,height:`${n}px`,background:a?"radial-gradient(circle, rgba(223, 105, 81, 0.8) 10%, rgba(223, 105, 81, 0) 70%)":"radial-gradient(circle, rgba(255, 255, 255, 0.9) 10%, rgba(255, 255, 255, 0) 70%)",borderRadius:"50%",filter:"blur(4px)",pointerEvents:"none",zIndex:"9998",transform:"translate(-50%, -50%) scale(0.5)",opacity:"0.8",transition:"transform 1s ease-out, opacity 1s ease-in, left 1s, top 1s"}),document.body.appendChild(t),requestAnimationFrame(()=>{const i=(Math.random()-.5)*50,s=Math.random()*30+10;t.style.transform=`translate(-50%, -50%) scale(${Math.random()*1+1.5})`,t.style.opacity="0",t.style.left=`${parseFloat(t.style.left)+i}px`,t.style.top=`${parseFloat(t.style.top)+s}px`}),setTimeout(()=>{t.remove()},1e3)}});
